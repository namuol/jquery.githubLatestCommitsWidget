// Generated by CoffeeScript 1.3.1
(function() {
  var wrap;

  wrap = function($) {
    $.fn.githubLatestCommitsWidget = function(options) {
      options = $.extend({}, $.fn.githubLatestCommitsWidget.defaultOptions, options);
      return this.each(function() {
        var callback;
        callback = function(response) {
          var items_html, result, _i, _len;
          items_html = '';
          for (_i = 0, _len = response.length; _i < _len; _i++) {
            result = response[_i];
            items_html += "<li>\n  <div class='commit-author-info'>\n    <img class='commit-avatar' src='" + result.author.avatar_url + "'>\n    <a href='https://github.com/" + result.author.login + "'>i\n      <span class='commit-author'>" + result.author.login + "</span>\n    </a>\n    <span class='commit-date'>" + ($.timeago(result.commit.committer.date)) + "</span>\n    <br />\n    <span class='commit-sha'>SHA: " + result.sha + "</span>\n  </div>\n  <a class='commit-message' href='https://github.com/" + options.username + "/" + options.repo + "/commit/" + result.sha + "' target='_blank'>" + result.commit.message + "</a>\n</li>";
          }
          return this.html("<div class='latest-commits-widget'>\n  <div class='latest-commits-header'>\n    <div class='gh-ico'></div>\n    <h4>Latest Commits to " + options.username + "/" + options.repo + "</h4>\n  </div>\n  <ul class='commit-history'>\n  " + items_html + "\n  </ul>\n</div>");
        };
        return $.ajax("https://api.github.com/options.repos/" + options.username + "/" + options.repo + "/commits?callback=dummy_callback", {
          data: {
            per_page: options.limit
          },
          dataType: 'jsonp',
          type: 'get'
        }).success(function(response) {
          return callback(response);
        });
      });
    };
    return $.fn.githubLatestCommitsWidget.defaultOptions = {
      limit: 10
    };
  };

  wrap(jQuery);

}).call(this);
